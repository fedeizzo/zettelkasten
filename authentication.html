<!DOCTYPE html></!DOCTYPE html><html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><title>Authentication - Federico Izzo&#39;s personal Zettelkasten</title><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><style type="text/css">body{background-color:#eeeeee !important;font-family:"Open Sans", serif !important}body .ui.container{font-family:"Open Sans", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Crimson Text", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body div#neuron-theme-default-teal .zettel-content h1{background-color:rgba(0,181,173,0.1)}body div#neuron-theme-default-teal span.zettel-link-container span.zettel-link a{color:#00b5ad}body div#neuron-theme-default-teal span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#00b5ad}body div#neuron-theme-default-teal .deemphasized:hover div.item a:hover{color:#00b5ad !important}body div#neuron-theme-default-teal div#footnotes{border-top-color:#00b5ad}body div#neuron-theme-default-brown .zettel-content h1{background-color:rgba(165,103,63,0.1)}body div#neuron-theme-default-brown span.zettel-link-container span.zettel-link a{color:#a5673f}body div#neuron-theme-default-brown span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#a5673f}body div#neuron-theme-default-brown .deemphasized:hover div.item a:hover{color:#a5673f !important}body div#neuron-theme-default-brown div#footnotes{border-top-color:#a5673f}body div#neuron-theme-default-red .zettel-content h1{background-color:rgba(219,40,40,0.1)}body div#neuron-theme-default-red span.zettel-link-container span.zettel-link a{color:#db2828}body div#neuron-theme-default-red span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#db2828}body div#neuron-theme-default-red .deemphasized:hover div.item a:hover{color:#db2828 !important}body div#neuron-theme-default-red div#footnotes{border-top-color:#db2828}body div#neuron-theme-default-orange .zettel-content h1{background-color:rgba(242,113,28,0.1)}body div#neuron-theme-default-orange span.zettel-link-container span.zettel-link a{color:#f2711c}body div#neuron-theme-default-orange span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#f2711c}body div#neuron-theme-default-orange .deemphasized:hover div.item a:hover{color:#f2711c !important}body div#neuron-theme-default-orange div#footnotes{border-top-color:#f2711c}body div#neuron-theme-default-yellow .zettel-content h1{background-color:rgba(251,189,8,0.1)}body div#neuron-theme-default-yellow span.zettel-link-container span.zettel-link a{color:#fbbd08}body div#neuron-theme-default-yellow span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#fbbd08}body div#neuron-theme-default-yellow .deemphasized:hover div.item a:hover{color:#fbbd08 !important}body div#neuron-theme-default-yellow div#footnotes{border-top-color:#fbbd08}body div#neuron-theme-default-olive .zettel-content h1{background-color:rgba(181,204,24,0.1)}body div#neuron-theme-default-olive span.zettel-link-container span.zettel-link a{color:#b5cc18}body div#neuron-theme-default-olive span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#b5cc18}body div#neuron-theme-default-olive .deemphasized:hover div.item a:hover{color:#b5cc18 !important}body div#neuron-theme-default-olive div#footnotes{border-top-color:#b5cc18}body div#neuron-theme-default-green .zettel-content h1{background-color:rgba(33,186,69,0.1)}body div#neuron-theme-default-green span.zettel-link-container span.zettel-link a{color:#21ba45}body div#neuron-theme-default-green span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#21ba45}body div#neuron-theme-default-green .deemphasized:hover div.item a:hover{color:#21ba45 !important}body div#neuron-theme-default-green div#footnotes{border-top-color:#21ba45}body div#neuron-theme-default-blue .zettel-content h1{background-color:rgba(33,133,208,0.1)}body div#neuron-theme-default-blue span.zettel-link-container span.zettel-link a{color:#2185d0}body div#neuron-theme-default-blue span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#2185d0}body div#neuron-theme-default-blue .deemphasized:hover div.item a:hover{color:#2185d0 !important}body div#neuron-theme-default-blue div#footnotes{border-top-color:#2185d0}body div#neuron-theme-default-violet .zettel-content h1{background-color:rgba(100,53,201,0.1)}body div#neuron-theme-default-violet span.zettel-link-container span.zettel-link a{color:#6435c9}body div#neuron-theme-default-violet span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#6435c9}body div#neuron-theme-default-violet .deemphasized:hover div.item a:hover{color:#6435c9 !important}body div#neuron-theme-default-violet div#footnotes{border-top-color:#6435c9}body div#neuron-theme-default-purple .zettel-content h1{background-color:rgba(163,51,200,0.1)}body div#neuron-theme-default-purple span.zettel-link-container span.zettel-link a{color:#a333c8}body div#neuron-theme-default-purple span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#a333c8}body div#neuron-theme-default-purple .deemphasized:hover div.item a:hover{color:#a333c8 !important}body div#neuron-theme-default-purple div#footnotes{border-top-color:#a333c8}body div#neuron-theme-default-pink .zettel-content h1{background-color:rgba(224,57,151,0.1)}body div#neuron-theme-default-pink span.zettel-link-container span.zettel-link a{color:#e03997}body div#neuron-theme-default-pink span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#e03997}body div#neuron-theme-default-pink .deemphasized:hover div.item a:hover{color:#e03997 !important}body div#neuron-theme-default-pink div#footnotes{border-top-color:#e03997}body div#neuron-theme-default-grey .zettel-content h1{background-color:rgba(118,118,118,0.1)}body div#neuron-theme-default-grey span.zettel-link-container span.zettel-link a{color:#767676}body div#neuron-theme-default-grey span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#767676}body div#neuron-theme-default-grey .deemphasized:hover div.item a:hover{color:#767676 !important}body div#neuron-theme-default-grey div#footnotes{border-top-color:#767676}body div#neuron-theme-default-black .zettel-content h1{background-color:rgba(27,28,29,0.1)}body div#neuron-theme-default-black span.zettel-link-container span.zettel-link a{color:#1b1c1d}body div#neuron-theme-default-black span.zettel-link-container span.zettel-link a:hover{color:#ffffff;background-color:#1b1c1d}body div#neuron-theme-default-black .deemphasized:hover div.item a:hover{color:#1b1c1d !important}body div#neuron-theme-default-black div#footnotes{border-top-color:#1b1c1d}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.84999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f8f8f8}body div.zettel-view .zettel-content pre{padding:0.5em 0.5em 0.5em 0.5em;overflow:auto;max-width:100%}body div.zettel-view .zettel-content div.pandoc-code{margin-left:auto;margin-right:auto}body div.zettel-view .zettel-content div.pandoc-code pre{background-color:#f8f8f8}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.backlinks-container{background-color:#eeeeee !important}body ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body ul.context-list > li{list-style-type:lower-roman}body span.zettel-link-container span.zettel-link a{font-weight:bold;text-decoration:none}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}body nav.top-menu{padding-top:1em;padding-bottom:1em;justify-content:center;text-align:center}body nav.top-menu > *{padding-left:0px;padding-right:0px}body i.tree.icon{overflow:hidden}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}</style><link href="https://fonts.googleapis.com/css?family=Crimson+Text|Open+Sans|Roboto+Mono&amp;display=swap" rel="stylesheet" /><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><meta content="Federico Izzo" name="author" /><meta content="Single sign on was born to overcome the difficult of remember or manager
many passwords from many sites/services. The more security domains[1],
the more sign-ons required

[1] an application or collection of applications that all trust a common
security token for authentication, authorization or ses" name="description" /><link href="https://fedeizzo.github.io/authentication.html" rel="canonical" /><meta content="Authentication" property="og:title" /><meta content="Federico Izzo&#39;s personal Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><meta content="https://fedeizzo.github.io/static/ssoBasicIdea.png" property="og:image" /><script type="application/ld+json">[{"@context":"https://schema.org","itemListElement":[{"name":"Zettelkasten","item":"https://fedeizzo.github.io/","@type":"ListItem","position":1},{"name":"University","item":"https://fedeizzo.github.io/university.html","@type":"ListItem","position":2},{"name":"Introduction to network and computer security","item":"https://fedeizzo.github.io/icns.html","@type":"ListItem","position":3},{"name":"Cryptology","item":"https://fedeizzo.github.io/cryptography.html","@type":"ListItem","position":4},{"name":"Asymmetric key encryption","item":"https://fedeizzo.github.io/asymmetricKeyEncryption.html","@type":"ListItem","position":5}],"@type":"BreadcrumbList"}]</script><style type="text/css">pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style></head><body><div class="ui fluid container" id="neuron-theme-default-black"><nav class="top-menu"><div class="ui inverted compact neuron icon menu black"><a class="left item" href="." title="Home"><i class="home icon"></i></a><a class="left item" href="search.html" title="Search Zettels"><i class="search icon"></i></a><a class="center item" href="https://github.com/fedeizzo/zettelkasten/edit/masterauthentication.md" title="Edit this Zettel"><i class="edit icon"></i></a><a class="right item" href="z-index.html" title="All Zettels (z-index)"><i class="tree icon"></i></a></div></nav><nav class="flipped tree deemphasized" id="zettel-uptree" style="transform-origin: 50%"><ul class="root"><li><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; asymmetric-key"><a href="asymmetricKeyEncryption.html">Asymmetric key encryption</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography"><a href="cryptography.html">Cryptology</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university"><a href="university.html">University</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link"><a href=".">Zettelkasten</a></span></span></div></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></nav><div class="ui text container" id="zettel-container" style="position: relative"><div id="zettel-container-anchor" style="position: absolute; top: -24px; left: 0"></div><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="authentication">Authentication</h1><h2 id="single-sign-on-sso">Single sign on (SSO)</h2><p>Single sign on was born to overcome the difficult of remember or manager many passwords from many sites/services. The more security domains<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span>, the more sign-ons required</p><p><img src="./static/ssoBasicIdea.png" /></p><p>Main properties are:</p><ul><li>credentials never leave the authentication domain</li><li>service providers (affiliated domains) have to trust the authentication domain</li><li>authentication transfer has to be protected</li></ul><h2 id="saml">SAML</h2><p>SAML stands for <em>Security Assertion Markup Language</em>. It is a common language and flow between systems that want to provide an SSO experience users. Data format uses an XML like format and can be:</p><ul><li>authentication data</li><li>authorization data</li></ul><p>The two main entity of SAML are:</p><ul><li><em><strong>identity provider</strong></em> (IdP) → tasks:<ul><li>authenticates the user</li><li>provides authorisation information</li></ul></li><li><em><strong>service provider</strong></em> (SP) → a server that hosts protected resources driven from information provided by the IdP. It uses local access policies to regulate access to protected resources.</li></ul><p>When these entities are grouped together and are managed together sharing same common policy form a federation.</p><h3 id="history">History</h3><p>Version 1.0 was defined in 2002. Version 2.0 was defined in 2005.</p><h3 id="scenario">Scenario</h3><p>A possible scenario can be:</p><ol><li>Alice visits an airplane website for making her trip;</li><li>for booking her flight, she provides her credentials to airline website;</li><li>after booking, she found a link to car rental;</li><li>she visits car rental website;</li><li>now Alice can rent a car without signing in again because authentication has been communicate between sites.</li></ol><p><img src="./static/ssoScenario.png" /></p><h3 id="authentication-flow">Authentication flow</h3><p>SAML authentication flow can be summarized as follow:</p><ol><li>user wants to access an <strong>SP</strong>;</li><li>user is redirected to a <strong>discovery service</strong> (internal or external, user’s choice <strong>IdP</strong>);</li><li>user goes back to the <strong>SP</strong> with the ID of his own <strong>IdP</strong>;</li><li>user is redirected to the <strong>IdP</strong>;</li><li>authentication is performed by the user;</li><li>user goes back to the <strong>SP</strong> with the authentication.</li></ol><p><img src="./static/samlAuthenticationFlow.png" /></p><h3 id="internal-structure">Internal structure</h3><p>The internal structure of SAML is composed by:</p><ul><li>a single stack composed by:<ul><li><em><strong>profiles</strong></em> → profiles are a composition of protocols, assertions and bindings combined to crate a federation and enable federate single sign-on. Some profiles are:<ul><li>web browser signle sign-on</li><li>single logout → if user is using signle sign-on a federation he has established sessions with mebers of federation. Sessions are managed by a session authority (in many cas is <strong>IdP</strong>). Session authority can use single logout to end all sessions.</li><li>artifact resolution</li></ul></li><li><em><strong>bindings</strong></em> → mechanism used to transport messages between requesters and responders.</li><li><em><strong>protocols</strong></em> → flow of assertions query and request for obtaining SAML assertions.</li><li><em><strong>assertions</strong></em> → set of statements made by a SAML authority:<ul><li>authentication assertion → issed byu a party that authenticates users</li><li>attribute assertion → id defines specifi details about he Subject</li><li>authorization assertion → it defines something the Subject is entitled to do</li></ul></li></ul></li><li><em><strong>authentication context</strong></em> → indicates how a user authenticated at an Identity provider. Context is included from <strong>IdP</strong> during assertion after <strong>SP</strong> request. Can be used to set different levels of authentication.</li><li><em><strong>metadata</strong></em> → document that describes the SAML deployment. Minimum content is:<ul><li>Entity ID → unique identifier used in software configurations;</li><li>Cryptographic Keys → used to sign SAML messages;</li><li>Protocol Endpoints → used to verify encrypted signed message.</li></ul></li></ul><p><img src="./static/samlStructure.png" /></p><h4 id="web-sso-profiles">Web SSO profiles</h4><p>A possible SSO scenario can be:</p><p><img src="./static/ssoProfile_1.png" /></p><ol><li>user has login session at <a href="http://www.first.com;">www.first.com;</a></li><li>user move to <a href="http://www.second.com">www.second.com</a> (assuming first and second has established previously a federal identity);</li><li>identity provider <a href="http://www.first.com">www.first.com</a> asserts to service provider site <a href="http://www.second.com">www.second.com</a> that the use is known;</li><li>since <a href="http://www.second.com">www.second.com</a> trusts <a href="http://www.first.com">www.first.com</a>, user authentication is valid and a local session for the user is created.</li></ol><p>In details:</p><ol><li>user is challenged to supply credentials to the <strong>IdP</strong> site;</li><li>user provides valid credentials and a local logon <strong>security context</strong> is created;</li><li>user moves from <strong>IdP</strong> to the <strong>SP</strong> site. This causes the <strong>IdP</strong>’s SSO service to be called;</li><li>SSO service builds <strong>SAML assertion</strong> representing logon security context;</li><li>browser issues an HTTP POST request to send a form to the <strong>SP</strong>’s Assertion Consumer Service;</li><li>final access check to allow/deny user access to resource.</li></ol><p><img src="./static/ssoProfileDetails_1.png" /></p><p>A second possibile SSO scenario ca be:</p><p><img src="./static/ssoProfile_2.png" /></p><ol><li>user is visiting an <strong>SP</strong> page that does not require authentication;</li><li>user try to access a restricted resource;</li><li><strong>SP</strong> sends the user to the <strong>IdP</strong> with an authentication request in order to have the user log in;</li><li>once logged in, the <strong>IdP</strong> produces an assertion that can be used by the <strong>Idp</strong> to validate the user’s rights to the protected resource.</li></ol><p>In details:</p><ol><li>User attempts to access a resource on <strong>SP</strong>;</li><li><strong>SP</strong> sends a redirect response;</li><li>SSO service check if there is already a security context at the identity provider; if not <strong>IdP</strong> interacts with user to provide valid credentials;</li><li>user provides valid credentials and a local logon security context is generated;</li><li><strong>Idp</strong> SSO service builds a SALM assertion representing the user’s logon security context;</li><li>the browser issues an HTTP POST request to send the form to the <strong>SP</strong>’s Assertion Consumer Service.</li><li>final access check to allow/deny user access to resource.</li></ol><p><img src="./static/ssoProfileDetails_2.png" /></p><h3 id="security">Security</h3><p>SAML defines some mechanism to detect and protect against man-in-the-middle attacks. The primary mechanism is for the relying party and asserting party to have a pre-existing trust relationship which typically relies on a Public Key Infrastructure (PKI).</p><p>Inside SAML standard there are other mechanisms:</p><ul><li>message integrity &amp; confidentiality → SSL/TLS recommended</li><li>when relying party requests an assertion from an asserting party bi-later authentication is required → SSL/TLS recommended</li><li>response message containing an assertion is delivered to relying party via a user’s web browser, message integrity is required → digital sign using XML signature recommended</li></ul><h3 id="privacy">Privacy</h3><p>In SAML privacy is related to two concepts:</p><ul><li>user’s ability to control how their identity data is shared and used;</li><li>mechanisms that inhibit their actions at multiple service providers from being inappropriately correlated.</li></ul><p>SAML ensures privacy with these mechanisms:</p><ul><li><em><strong>pseudonyms</strong></em> → established between an identity and a service provider.</li><li><em><strong>one-time/transient identifiers</strong></em> → SSO operations are stateless. There is not the possibility to know the previous operations.</li><li><em><strong>authentication context</strong></em> → deliver only needed information. Is like having different authentication levels that contains different information.</li></ul><h2 id="spid">SPID</h2><p>SPID means <em>Sistema Pubblico Identità Digitale</em>, it is based on SAML 2.0</p><p><img src="./static/spid.png" /></p><p>In this system Identity providers are private and there are different type of assurance levels:</p><ul><li>Level 1: some confidence in asserted identity’s validity</li><li>Level 2: high confidence in asserted identity’s validity</li><li>Level 3: very high confidence in asserted identity’s validity</li></ul><h3 id="register">Register</h3><p>Register is a repository of all the information related to the entities adhering to the SPID and represents the evidence of the so-called <strong>circle of trust</strong> established therein. This relationship of trust on which the federation established in SPID is achieved through the intermediation of Agency, third party guarantor, through the process of accreditation of digital identity providers, the attribute authorities and service providers.</p><p>So an adhesion to SPID constitutes the establishment of a relationship of trust with all existing members accredited by Agency.</p><p>Inside federation registry there is the list of entities that have passed the accreditation process and are therefore part of the SPID federation.</p><p>Each entry of the registry, called AuthorityInfo, contains:</p><ul><li>SAML identifier of the entity</li><li>name of the subject to which the federation entity refers</li><li>type of entity (Identity provider, Attribute Authority, Service Provider)</li><li>URL of the metadata provider service</li><li>list of qualified attributes which can be certified by an Attribute Authority</li></ul><h2 id="european-identity-infrastructure">European Identity Infrastructure</h2><p>In the following example an Italian citizen wants to authenticate against a German online service:</p><ol><li>German eIDAS-Node is directed by the web application to initiate the authentication process</li><li>it sends a request to the Italian eIDAS-Node</li><li>Italian eIDAS-Node forwards the user to a system that can used to authenticate him</li><li>after user authentication German eIDAS-Node receives the citizen’s information which it forwards to the web application</li></ol><p>The communication between the two eIDAS relies on SAML.</p><p><img src="./static/eidExample.png" /></p><p><img src="./static/eidExample2.png" /></p><h3 id="vulnerability">Vulnerability</h3><p>European commission has provided the eIDAS-Node Integration Package in order to allow each member state to provide its own eIDAS-Node. A vulnerability was found, an attacker can send a manipulated SAML response to an eIDAS-Connector to authenticate as anybody. Vulnerable code was used to verify the trust of the certificate the SAML response:</p><ol><li>the certificate is accepted if it is in the local trust store</li><li>otherwise, the issuer certificate of the entity certificate is retrieved from either the local trust store of from the supplemental certificates in the SAML message</li><li>if a trust path can be established between the issuer certificate and a certificate in the trust store, the entity certificate is accepted</li></ol><p>In step 2 the application does not verify whether the entity certificate has been correctly signed by the issuer certificate. An attacker can therefore sign a manipulated SAML response with a forget certificate</p><div id="footnotes"><ol><li id="fn1"><p>an application or collection of applications that all trust a common security token for authentication, authorization or session management. A security token is issued to user after the user has actively authenticated with a user ID and password to the security domain.</p><a href="#fnref1">↩︎</a></li></ol></div></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2020-12-20T15:16">2020-12-20</time></div></div></article><nav class="ui bottom attached segment deemphasized backlinks-container"><h3 class="ui header">Backlinks</h3><ul class="backlinks"><li><span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; asymmetric-key"><a href="asymmetricKeyEncryption.html">Asymmetric key encryption</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><p>you can read more about authentication in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; authentication"><a href="authentication.html">Authentication</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p></div></li><li class="item"><div class="pandoc">problem related to authentication<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span>. Who ensure pair composed by public-private keys and person is valid?<div id="footnotes"><ol><li id="fn1"><p>you can read more about authentication in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; authentication"><a href="authentication.html">Authentication</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p><a href="#fnref1">↩︎</a></li></ol></div></div></li><li class="item"><div class="pandoc"><p>Another important point is that <em>DH</em> does not provide authentication<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span>, parties do not know whom they are establishing a key with. For this reason <strong>Man-In-The-Middle</strong> (MITM) can be used.</p><div id="footnotes"><ol><li id="fn1"><p>you can read more about authentication in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; authentication"><a href="authentication.html">Authentication</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p><a href="#fnref1">↩︎</a></li></ol></div></div></li><li class="item"><div class="pandoc">Bob decrypt the message with Alice’s public key. For this reason he knows that Alice sent the message (authentication<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span>), Alice cannot deny having sent the message (non-repudiation<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup></span>) and also none alters the message during the transit (integrity<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn3" id="fnref3">3</a></sup></span>).<div id="footnotes"><ol><li id="fn1"><p>you can read more about authentication in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cryptography; authentication"><a href="authentication.html">Authentication</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p><a href="#fnref1">↩︎</a></li><li id="fn2"><p>you can read more about non-repudiation in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p><a href="#fnref2">↩︎</a></li><li id="fn3"><p>you can read more about integrity in <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity; cia-trade"><a href="ciaTrade.html">CIA trade</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span> and <span class="zettel-link-container folgezettel"><span class="zettel-link" data-inverted="" data-position="right center" data-tooltip="Tags: university/introductionComputerNetworkSecurity"><a href="icns.html">Introduction to network and computer security</a><span data-nosnippet=""><sup title="Branching link (folgezettel)">ᛦ</sup></span></span></span></p><a href="#fnref3">↩︎</a></li></ol></div></div></li></ul></li></ul><a class="ui basic label zettel-tag" href="search.html?tag=university/introductionComputerNetworkSecurity" title="See all zettels tagged &#39;university/introductionComputerNetworkSecurity&#39;">university/introductionComputerNetworkSecurity</a><a class="ui basic label zettel-tag" href="search.html?tag=cryptography" title="See all zettels tagged &#39;cryptography&#39;">cryptography</a><a class="ui basic label zettel-tag" href="search.html?tag=authentication" title="See all zettels tagged &#39;authentication&#39;">authentication</a></nav></div></div><script>if (window.scrollY == 0) { document.getElementById("zettel-container-anchor").scrollIntoView({behavior: "smooth", block: "start"}); }</script><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron" /></a></div></div></div></body></html>